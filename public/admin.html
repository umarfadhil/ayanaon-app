<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Pin | AyaNaon?</title>
    <link rel="icon" href="favicon-v2.svg" type="image/svg+xml">
    <link rel="stylesheet" href="auth.css">
    <link rel="stylesheet" href="admin.css">
</head>
<body>
    <main class="admin-page">
        <header class="admin-header">
            <div class="admin-title-block">
                <p class="eyebrow">Admin Page</p>
                <h1>Website Management Dashboard</h1>
                <p class="subhead">Manage Pins, Metrics, and Maintenance</p>
            </div>
            <div class="admin-actions">
                <a class="ghost-btn" href="index.html">See Maps</a>
                <button id="admin-logout-btn" class="ghost-btn ghost-btn--danger">Logout</button>
            </div>
        </header>
        <div class="admin-tabs" role="tablist" aria-label="Admin Navigation">
            <button class="admin-tab admin-tab--active" data-tab="pins" role="tab" aria-selected="true">Manage Pins</button>
            <button class="admin-tab" data-tab="mass" role="tab" aria-selected="false">Mass Promotions</button>
            <button class="admin-tab" data-tab="users" role="tab" aria-selected="false" data-admin-only="true">Manage Users</button>
            <button class="admin-tab" data-tab="metrics" role="tab" aria-selected="false" data-admin-only="true">Business Metrics</button>
            <button class="admin-tab" data-tab="features" role="tab" aria-selected="false" data-admin-only="true">Features</button>
            <button class="admin-tab" data-tab="seo" role="tab" aria-selected="false" data-admin-only="true">Manage SEO</button>
            <button class="admin-tab" data-tab="tabs" role="tab" aria-selected="false" data-admin-only="true">Manage Tabs</button>
            <button class="admin-tab" data-tab="categories" role="tab" aria-selected="false" data-admin-only="true">Manage Categories</button>
            <button class="admin-tab" data-tab="brands" role="tab" aria-selected="false" data-admin-only="true">Manage Brands</button>
            <button class="admin-tab" data-tab="areas" role="tab" aria-selected="false" data-admin-only="true">Manage Areas</button>
        </div>

        <section id="admin-pin-content" class="admin-tab-content">

        <section class="admin-summary">
            <div class="summary-card">
                <div class="summary-label">Total Active Pins</div>
                <div class="summary-value" id="pin-count">-</div>
                <button id="refresh-pins-btn" class="chip-btn" type="button">Refresh data</button>
                <div class="summary-meta" id="pin-count-subtext">Loading pin count...</div>
            </div>
            <div class="summary-card admin-user-card">
                <div class="summary-label">Logged in as</div>
                <div class="summary-value" id="admin-name">Admin</div>
                <div class="summary-meta" id="admin-username"></div>
            </div>
            <div class="summary-card maintenance-card" data-admin-only="true">
                <div class="maintenance-row">
                    <div>
                        <div class="summary-label">Website Maintenance</div>
                        <div class="summary-value maintenance-status" id="maintenance-status-label">Normal</div>
                        <div class="summary-meta" id="maintenance-meta">Visitors see the site as usual.</div>
                    </div>
                    <label class="maintenance-switch" aria-label="Toggle maintenance">
                        <input type="checkbox" id="maintenance-toggle">
                        <span class="maintenance-slider"></span>
                    </label>
                </div>
                <label class="maintenance-message-label" for="maintenance-message">Message for visitors</label>
                <textarea id="maintenance-message" rows="2" placeholder="Example: Site under maintenance until 14:00"></textarea>
                <div class="maintenance-actions">
                    <button type="button" id="maintenance-save-btn" class="chip-btn">Save</button>
                    <span class="maintenance-hint">Changes are immediately visible on the main page.</span>
                </div>
            </div>
        </section>

        <div id="admin-message" class="admin-message" role="status" aria-live="polite"></div>

        <section class="admin-grid">
            <aside class="pin-list-panel">
                <div class="panel-header">
                    <div>
                        <h2>Pin List</h2>
                    </div>
                </div>
                <div class="pin-filters" aria-label="Filter pin list">
                    <div class="pin-filter pin-filter--category">
                        <select id="filter-category" aria-label="Category">
                            <option value="">All categories</option>
                        </select>
                    </div>
                    <div class="pin-filter pin-filter-row" role="group" aria-label="Filter Link">
                        <div class="pin-filter-label">Link</div>
                        <div class="pin-filter-options">
                            <label class="pill-radio">
                                <input type="radio" name="filter-link" value="any" checked>
                                <span class="radio-shape"></span>
                                <span class="radio-label">Any</span>
                            </label>
                            <label class="pill-radio">
                                <input type="radio" name="filter-link" value="with">
                                <span class="radio-shape"></span>
                                <span class="radio-label">Filled</span>
                            </label>
                            <label class="pill-radio">
                                <input type="radio" name="filter-link" value="without">
                                <span class="radio-shape"></span>
                                <span class="radio-label">Empty</span>
                            </label>
                        </div>
                    </div>
                    <div class="pin-filter pin-filter-row" role="group" aria-label="Filter Start Date">
                        <div class="pin-filter-label">Start Date</div>
                        <div class="pin-filter-options">
                            <label class="pill-radio">
                                <input type="radio" name="filter-start" value="any" checked>
                                <span class="radio-shape"></span>
                                <span class="radio-label">Any</span>
                            </label>
                            <label class="pill-radio">
                                <input type="radio" name="filter-start" value="filled">
                                <span class="radio-shape"></span>
                                <span class="radio-label">Filled</span>
                            </label>
                            <label class="pill-radio">
                                <input type="radio" name="filter-start" value="empty">
                                <span class="radio-shape"></span>
                                <span class="radio-label">Empty</span>
                            </label>
                        </div>
                    </div>
                    <div class="pin-filter pin-filter-row" role="group" aria-label="Filter End Date">
                        <div class="pin-filter-label">End Date</div>
                        <div class="pin-filter-options">
                            <label class="pill-radio">
                                <input type="radio" name="filter-end" value="any" checked>
                                <span class="radio-shape"></span>
                                <span class="radio-label">Any</span>
                            </label>
                            <label class="pill-radio">
                                <input type="radio" name="filter-end" value="filled">
                                <span class="radio-shape"></span>
                                <span class="radio-label">Filled</span>
                            </label>
                            <label class="pill-radio">
                                <input type="radio" name="filter-end" value="empty">
                                <span class="radio-shape"></span>
                                <span class="radio-label">Empty</span>
                            </label>
                        </div>
                    </div>
                    <div class="pin-filter pin-filter-row" role="group" aria-label="Filter Photo">
                        <div class="pin-filter-label">Photo</div>
                        <div class="pin-filter-options">
                            <label class="pill-radio">
                                <input type="radio" name="filter-photo" value="any" checked>
                                <span class="radio-shape"></span>
                                <span class="radio-label">Any</span>
                            </label>
                            <label class="pill-radio">
                                <input type="radio" name="filter-photo" value="with">
                                <span class="radio-shape"></span>
                                <span class="radio-label">Filled</span>
                            </label>
                            <label class="pill-radio">
                                <input type="radio" name="filter-photo" value="without">
                                <span class="radio-shape"></span>
                                <span class="radio-label">Empty</span>
                            </label>
                        </div>
                    </div>
                </div>
                <div class="pin-search-row">
                    <input type="search" id="pin-search" placeholder="Search title or category" aria-label="Search pins">
                    <button type="button" class="search-btn" id="pin-search-btn">Search</button>
                </div>
                <ul id="pin-list" class="pin-list" aria-label="List of pins"></ul>
            </aside>

            <section class="pin-editor">
                <div class="panel-header">
                    <div>
                        <h2 id="editor-title">Pin Details</h2>
                    </div>
                </div>
                <form id="pin-edit-form" class="pin-form" novalidate>
                    <div class="form-row">
                        <label for="pin-title">Title</label>
                        <input type="text" id="pin-title" name="title" required placeholder="Pin title">
                    </div>
                    <div class="form-row">
                        <label for="pin-description">Description</label>
                        <textarea id="pin-description" name="description" required rows="3" placeholder="Short description"></textarea>
                    </div>
                    <div class="form-grid">
                        <div class="form-row">
                            <label for="pin-category">Category</label>
                            <select id="pin-category" name="category" required>
                                <option value="" disabled selected>Pilih kategori</option>
                            </select>
                        </div>
                        <div class="form-row">
                            <label for="pin-link">Link (optional)</label>
                            <input type="url" id="pin-link" name="link" placeholder="https://">
                        </div>
                    </div>
                    <div class="form-row">
                        <label for="pin-lifetime">Lifetime</label>
                        <select id="pin-lifetime">
                            <option value="">Leave as is</option>
                            <option value="today">Only today</option>
                            <option value="date">Select date</option>
                        </select>
                    </div>
                    <div class="form-grid">
                        <div class="form-row">
                            <label for="pin-lifetime-start">Start Date</label>
                            <input type="text" id="pin-lifetime-start" placeholder="dd/mm/yyyy">
                        </div>
                        <div class="form-row">
                            <label for="pin-lifetime-end">End Date</label>
                            <input type="text" id="pin-lifetime-end" placeholder="dd/mm/yyyy">
                        </div>
                    </div>
                    <div class="form-row coordinate-row">
                        <label>Coordinates</label>
                        <p class="image-hint">Fill in manually or use the mini map to select a location.</p>
                        <div class="form-grid">
                            <input type="text" id="pin-lat" placeholder="Lat">
                            <input type="text" id="pin-lng" placeholder="Lng">
                        </div>
                        <div class="mini-map-search">
                            <input type="text" id="mini-map-search-input" placeholder="Search address or place">
                            <button type="button" id="mini-map-search-btn" class="ghost-btn chip-btn">Search</button>
                        </div>
                        <div id="admin-mini-map" class="mini-map" aria-label="Mini map for selecting location"></div>
                    </div>
                    <div class="form-row">
                        <label>Pin Photos</label>
                        <div class="image-hint" id="image-hint">Maximum 3 photos, 4MB per photo.</div>
                        <div id="existing-images" class="image-list" aria-live="polite"></div>
                        <div id="new-images" class="image-list" aria-live="polite"></div>
                        <div class="upload-actions-row">
                            <div class="upload-row">
                                <label class="upload-btn">
                                    <input type="file" id="pin-image-input" accept="image/*" multiple>
                                    <span>Add Photos</span>
                                </label>
                                <span class="upload-remaining" id="photo-remaining"></span>
                            </div>
                            <div class="form-actions">
                                <button type="button" id="delete-pin-btn" class="ghost-btn ghost-btn--danger">Delete Pin</button>
                                <button type="submit" class="primary-btn" id="save-pin-btn">Save Changes</button>
                            </div>
                        </div>
                    </div>
                </form>
            </section>
        </section>
        </section>

        <div id="admin-mass-pane" class="admin-tab-content hidden">
            <section class="admin-mass">
                <div class="panel-header">
                    <div>
                        <h2>Mass Promotions</h2>
                        <p class="panel-sub">Tambahkan banyak pin sekaligus dari hasil pencarian tempat.</p>
                    </div>
                </div>
                <div id="mass-message" class="admin-message" role="status" aria-live="polite"></div>
                <div class="admin-grid mass-grid">
                    <aside class="mass-search-panel">
                        <!-- Source sub-tabs -->
                        <div class="mass-source-tabs">
                            <button type="button" class="mass-source-tab mass-source-tab--active" data-mass-source="search">Search Places</button>
                            <button type="button" class="mass-source-tab" data-mass-source="brands">From Brands</button>
                        </div>

                        <!-- Source: Search Places -->
                        <div id="mass-source-search" class="mass-source-section">
                            <div class="panel-header">
                                <div>
                                    <h2>Search Places</h2>
                                    <p class="panel-sub">Cari brand atau alamat. Tambahkan "di Kota/Provinsi" untuk batasi area.</p>
                                </div>
                            </div>
                            <div class="mass-search-row">
                                <input type="search" id="mass-search-input" placeholder="Kopi Nako di Bogor" aria-label="Search places">
                                <button type="button" class="search-btn" id="mass-search-btn">Search</button>
                            </div>
                        </div>

                        <!-- Source: From Brands -->
                        <div id="mass-source-brands" class="mass-source-section hidden">
                            <div class="panel-header">
                                <div>
                                    <h2>From Brands</h2>
                                    <p class="panel-sub">Pilih brand yang tersimpan untuk mengambil lokasi-lokasinya.</p>
                                </div>
                            </div>
                            <div class="mass-search-row">
                                <select id="mass-brand-select" aria-label="Select brand">
                                    <option value="" disabled selected>Pilih brand...</option>
                                </select>
                                <button type="button" class="ghost-btn chip-btn" id="mass-brand-refresh-btn">Refresh</button>
                            </div>
                        </div>

                        <!-- Shared: counts, actions, map, results list -->
                        <div class="mass-search-meta">
                            <div class="mass-counts">
                                <span id="mass-results-count">0 results</span>
                                <span id="mass-selected-count">0 selected</span>
                            </div>
                            <div class="mass-actions">
                                <button type="button" class="ghost-btn chip-btn" id="mass-select-all-btn">Select all</button>
                                <button type="button" class="ghost-btn chip-btn" id="mass-clear-btn">Clear selection</button>
                            </div>
                        </div>
                        <div id="mass-results-map" class="mini-map mass-map" aria-label="Map for search results"></div>
                        <ul id="mass-search-results" class="mass-results" aria-label="Search results"></ul>
                    </aside>
                    <section class="mass-form-panel">
                        <div class="panel-header">
                            <div>
                                <h2>Pin Details</h2>
                                <p class="panel-sub">Diterapkan ke semua lokasi terpilih.</p>
                            </div>
                        </div>
                        <form id="mass-form" class="pin-form" novalidate>
                            <div class="form-row">
                                <label for="mass-title">Title</label>
                                <input type="text" id="mass-title" name="title" required placeholder="Pin title">
                            </div>
                            <div class="form-row">
                                <label for="mass-description">Description</label>
                                <textarea id="mass-description" name="description" required rows="3" placeholder="Short description"></textarea>
                            </div>
                            <div class="form-grid">
                                <div class="form-row">
                                    <label for="mass-category">Category</label>
                                    <select id="mass-category" name="category" required>
                                        <option value="" disabled selected>Pilih kategori</option>
                                    </select>
                                </div>
                                <div class="form-row">
                                    <label for="mass-link">Link (optional)</label>
                                    <input type="url" id="mass-link" name="link" placeholder="https://">
                                </div>
                            </div>
                            <div class="form-row">
                                <label for="mass-lifetime">Lifetime</label>
                                <select id="mass-lifetime">
                                    <option value="">Leave as is</option>
                                    <option value="today">Only today</option>
                                    <option value="date">Select date</option>
                                </select>
                            </div>
                            <div class="form-grid">
                                <div class="form-row">
                                    <label for="mass-start">Start Date</label>
                                    <input type="text" id="mass-start" placeholder="dd/mm/yyyy">
                                </div>
                                <div class="form-row">
                                    <label for="mass-end">End Date</label>
                                    <input type="text" id="mass-end" placeholder="dd/mm/yyyy">
                                </div>
                            </div>
                            <div class="form-row">
                                <label>Pin Photos</label>
                                <div class="image-hint">Maximum 3 photos, 4MB per photo.</div>
                                <div id="mass-images" class="image-list" aria-live="polite"></div>
                                <div class="upload-actions-row">
                                    <div class="upload-row">
                                        <label class="upload-btn">
                                            <input type="file" id="mass-image-input" accept="image/*" multiple>
                                            <span>Add Photos</span>
                                        </label>
                                        <span class="upload-remaining" id="mass-photo-remaining"></span>
                                    </div>
                                    <div class="form-actions">
                                        <button type="submit" class="primary-btn" id="mass-create-btn">Add Selected Pins</button>
                                    </div>
                                </div>
                            </div>
                            <div class="mass-status" id="mass-status"></div>
                        </form>
                    </section>
                </div>
            </section>
        </div>

        <div id="admin-users-pane" class="admin-tab-content hidden" data-admin-only="true">
            <section class="admin-users">
                <div class="panel-header">
                    <div>
                        <h2>User Management</h2>
                        <p class="panel-sub">Kelola status warga terdaftar.</p>
                    </div>
                    <div class="panel-actions">
                        <button type="button" id="users-refresh-btn" class="ghost-btn chip-btn">Refresh</button>
                    </div>
                </div>
                <div id="admin-users-message" class="admin-message" role="status" aria-live="polite"></div>
                <div class="users-table" role="table" aria-label="Daftar warga terdaftar">
                    <div class="users-table__row users-table__header" role="row">
                        <div role="columnheader">Display Name</div>
                        <div role="columnheader">Username</div>
                        <div role="columnheader">Last Login</div>
                        <div role="columnheader">Status</div>
                        <div role="columnheader">Action</div>
                    </div>
                    <div id="users-table-body" class="users-table__body" role="rowgroup"></div>
                </div>
            </section>
        </div>

        <div id="admin-tabs-pane" class="admin-tab-content hidden" data-admin-only="true">
            <section class="admin-tabs-manager">
                <div class="panel-header">
                    <div>
                        <h2>Manage Tabs</h2>
                        <p class="panel-sub">Atur urutan dan visibilitas tab berdasarkan role. Perubahan berlaku untuk semua pengguna.</p>
                    </div>
                </div>
                <div id="tabs-message" class="admin-message" role="status" aria-live="polite"></div>
                <ul id="tabs-order-list" class="tabs-order-list" aria-label="Tab order list"></ul>
                <div class="tabs-actions">
                    <button type="button" class="chip-btn" id="tabs-save-btn" disabled>Save Changes</button>
                </div>
            </section>
        </div>

        <div id="admin-categories-pane" class="admin-tab-content hidden" data-admin-only="true">
            <section class="admin-categories-manager">
                <div class="panel-header">
                    <div>
                        <h2>Manage Categories</h2>
                        <p class="panel-sub">Tambah, ubah nama, hapus, atau urutkan kategori pin. Menghapus kategori hanya menghilangkan dari daftar, pin tetap menggunakan kategori lama.</p>
                    </div>
                </div>
                <div id="categories-message" class="admin-message" role="status" aria-live="polite"></div>
                <div class="categories-toolbar">
                    <div class="categories-input-row">
                        <input type="text" id="category-new-input" placeholder="Nama kategori baru">
                        <button type="button" class="chip-btn" id="category-add-btn">Add Category</button>
                    </div>
                </div>
                <ul id="categories-order-list" class="categories-order-list" aria-label="Category order list"></ul>
                <div class="categories-actions">
                    <button type="button" class="chip-btn" id="categories-save-btn" disabled>Save Changes</button>
                    <button type="button" class="ghost-btn chip-btn" id="categories-reset-btn" disabled>Reset</button>
                </div>
            </section>
        </div>

        <div id="admin-metrics-pane" class="admin-tab-content hidden metrics-two-col" data-admin-only="true">
            <section id="admin-metrics-content" class="admin-metrics">
                <div class="panel-header">
                    <div>
                        <h2>Business Metrics</h2>
                        <p class="panel-sub">Monitor visitors and pin performance.</p>
                    </div>
                    <div class="panel-actions">
                        <button type="button" id="metrics-refresh-btn" class="ghost-btn chip-btn">Refresh</button>
                    </div>
                </div>
                <div class="metrics-controls">
                    <div class="metrics-control">
                        <label for="metrics-granularity">Range</label>
                        <select id="metrics-granularity">
                            <option value="day" selected>Per Day</option>
                            <option value="month">Per Month</option>
                            <option value="year">Per Year</option>
                        </select>
                    </div>
                    <div class="metrics-control" id="metrics-month-wrap">
                        <label for="metrics-month">Month</label>
                        <select id="metrics-month">
                            <option value="1">January</option>
                            <option value="2">February</option>
                            <option value="3">March</option>
                            <option value="4">April</option>
                            <option value="5">May</option>
                            <option value="6">June</option>
                            <option value="7">July</option>
                            <option value="8">August</option>
                            <option value="9">September</option>
                            <option value="10">October</option>
                            <option value="11">November</option>
                            <option value="12">December</option>
                        </select>
                    </div>
                    <div class="metrics-control" id="metrics-year-wrap">
                        <label for="metrics-year">Year</label>
                        <input type="number" id="metrics-year" min="2000" max="2100">
                    </div>
                    <div class="metrics-control" id="metrics-year-range-wrap">
                        <label for="metrics-start-year">Year Range</label>
                        <div class="year-range">
                            <input type="number" id="metrics-start-year" min="2000" max="2100" placeholder="Start">
                            <input type="number" id="metrics-end-year" min="2000" max="2100" placeholder="End">
                        </div>
                    </div>
                    <div class="metrics-control">
                        <button type="button" id="metrics-apply" class="chip-btn">Apply</button>
                    </div>
                </div>
                <div class="metrics-columns">
                    <div class="metrics-column">
                        <div class="metrics-card">
                            <div class="metrics-card__header">
                                <h3>Unique Visitors</h3>
                            </div>
                            <div class="metrics-chart" id="uv-chart"></div>
                        </div>
                    </div>
                    <div class="metrics-column">
                        <div class="metrics-card">
                            <div class="metrics-card__header">
                                <h3>Pageviews</h3>
                            </div>
                            <div class="metrics-chart" id="pv-chart"></div>
                        </div>
                    </div>
                    <div class="metrics-column metrics-column--lists">
                        <div class="metrics-card">
                            <div class="metrics-card__header">
                                <h3>Top Pins</h3>
                                <span class="metrics-note" id="top-pins-range"></span>
                            </div>
                            <ol id="top-pins-list" class="metrics-list"></ol>
                        </div>
                        <div class="metrics-card">
                            <div class="metrics-card__header">
                                <h3>Top Sources</h3>
                                <span class="metrics-note" id="top-sources-range"></span>
                            </div>
                            <ol id="top-sources-list" class="metrics-list"></ol>
                        </div>
                        <div class="metrics-card">
                            <div class="metrics-card__header">
                                <h3>Top Cities</h3>
                                <span class="metrics-note" id="top-cities-range"></span>
                            </div>
                            <ol id="top-cities-list" class="metrics-list"></ol>
                        </div>
                    </div>
                </div>
                <div class="metrics-heatmap">
                    <div class="metrics-card__header">
                        <h3>Visitor Heatmap</h3>
                        <span class="metrics-note" id="heatmap-range"></span>
                    </div>
                    <div id="metrics-heatmap" class="mini-map" aria-label="Heatmap pengunjung"></div>
                </div>
            </section>
            <section class="admin-embed-section">
                <div class="metrics-card__header">
                    <h3>Dashboard</h3>
                    <button type="button" id="dashboard-reload-btn" class="chip-btn">Refresh</button>
                </div>
                <div class="dashboard-frame-wrapper">
                    <iframe id="dashboard-frame" title="Business Metrics Dashboard" loading="lazy"></iframe>
                </div>
                <div id="dashboard-error" class="metrics-note"></div>
            </section>
        </div>

        <div id="admin-features-pane" class="admin-tab-content hidden" data-admin-only="true">
            <section class="admin-features">
                <div class="panel-header">
                    <div>
                        <h2>Feature Management</h2>
                        <p class="panel-sub">Enable or disable modules shown on the main page.</p>
                    </div>
                </div>
                <div id="admin-feature-message" class="admin-message" role="status" aria-live="polite"></div>
                <div class="feature-grid">
                    <div class="summary-card feature-card">
                        <div class="feature-row">
                            <div>
                                <div class="feature-title">Gerobak Online</div>
                                <div id="feature-gerobak-description" class="feature-meta">
                                    Show seller login, live map markers, and statistics.
                                </div>
                            </div>
                            <label class="maintenance-switch" aria-label="Toggle Gerobak Online feature">
                                <input type="checkbox" id="feature-gerobak-toggle" aria-describedby="feature-gerobak-description">
                                <span class="maintenance-slider"></span>
                            </label>
                        </div>
                        <div class="feature-actions">
                            <button type="button" id="feature-save-btn" class="chip-btn">Save</button>
                            <span class="feature-hint">Changes are visible on the main page within a few minutes.</span>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <div id="admin-seo-pane" class="admin-tab-content hidden" data-admin-only="true">
            <section class="admin-seo">
                <div class="panel-header">
                    <div>
                        <h2>SEO Management</h2>
                        <p class="panel-sub">Update search and sharing metadata for the main page.</p>
                    </div>
                </div>
                <div id="admin-seo-message" class="admin-message" role="status" aria-live="polite"></div>
                <div class="seo-grid">
                    <div class="summary-card seo-card">
                        <div class="seo-section-title">Search Basics</div>
                        <div class="seo-field">
                            <label for="seo-title">Site Title</label>
                            <input type="text" id="seo-title" maxlength="70" placeholder="AyaNaon? by Petalytix">
                            <span class="seo-hint">Recommended 50-60 characters.</span>
                        </div>
                        <div class="seo-field">
                            <label for="seo-description">Meta Description</label>
                            <textarea id="seo-description" rows="3" maxlength="180" placeholder="Describe the map experience."></textarea>
                            <span class="seo-hint">Recommended 140-160 characters.</span>
                        </div>
                        <div class="seo-field">
                            <label for="seo-keywords">Keywords (comma separated)</label>
                            <input type="text" id="seo-keywords" placeholder="community map, promos, events">
                        </div>
                        <div class="seo-field">
                            <label for="seo-site-url">Site URL</label>
                            <input type="url" id="seo-site-url" placeholder="https://your-domain.com">
                            <span class="seo-hint">Used for canonical and sitemap URLs.</span>
                        </div>
                        <div class="seo-toggle-row">
                            <div>
                                <div class="feature-title">Allow Indexing</div>
                                <div class="feature-meta">Let search engines show this site.</div>
                            </div>
                            <label class="maintenance-switch" aria-label="Allow indexing">
                                <input type="checkbox" id="seo-robots-index">
                                <span class="maintenance-slider"></span>
                            </label>
                        </div>
                        <div class="seo-toggle-row">
                            <div>
                                <div class="feature-title">Allow Follow</div>
                                <div class="feature-meta">Allow crawlers to follow links.</div>
                            </div>
                            <label class="maintenance-switch" aria-label="Allow follow">
                                <input type="checkbox" id="seo-robots-follow">
                                <span class="maintenance-slider"></span>
                            </label>
                        </div>
                        <div class="seo-field">
                            <label for="seo-google-verification">Google Site Verification</label>
                            <input type="text" id="seo-google-verification" placeholder="Paste the verification token">
                        </div>
                    </div>
                    <div class="summary-card seo-card">
                        <div class="seo-section-title">Social Sharing</div>
                        <div class="seo-field">
                            <label for="seo-og-title">Open Graph Title</label>
                            <input type="text" id="seo-og-title" maxlength="70" placeholder="Optional override">
                        </div>
                        <div class="seo-field">
                            <label for="seo-og-description">Open Graph Description</label>
                            <textarea id="seo-og-description" rows="3" maxlength="180" placeholder="Optional override"></textarea>
                        </div>
                        <div class="seo-field">
                            <label for="seo-og-image">Open Graph Image URL</label>
                            <input type="url" id="seo-og-image" placeholder="https://.../share-image.jpg">
                        </div>
                        <div class="seo-field">
                            <label for="seo-twitter-title">Twitter Title</label>
                            <input type="text" id="seo-twitter-title" maxlength="70" placeholder="Optional override">
                        </div>
                        <div class="seo-field">
                            <label for="seo-twitter-description">Twitter Description</label>
                            <textarea id="seo-twitter-description" rows="3" maxlength="180" placeholder="Optional override"></textarea>
                        </div>
                        <div class="seo-field">
                            <label for="seo-twitter-image">Twitter Image URL</label>
                            <input type="url" id="seo-twitter-image" placeholder="https://.../twitter-image.jpg">
                        </div>
                    </div>
                    <div class="summary-card seo-preview-card">
                        <div class="seo-section-title">Search Preview</div>
                        <div class="seo-preview">
                            <div id="seo-preview-title" class="seo-preview-title">AyaNaon? by Petalytix</div>
                            <div id="seo-preview-url" class="seo-preview-url">https://your-domain.com</div>
                            <div id="seo-preview-description" class="seo-preview-description">
                                Community-driven map to share local events, promos, and reports near you.
                            </div>
                        </div>
                        <div class="seo-preview-meta">
                            <div>Robots: <span id="seo-preview-robots">index, follow</span></div>
                            <div>Sitemap: <span id="seo-sitemap-url">/sitemap.xml</span></div>
                        </div>
                    </div>
                </div>
                <div class="seo-actions">
                    <button type="button" id="seo-save-btn" class="chip-btn">Save SEO</button>
                    <span class="feature-hint">Changes apply to the main page within a few minutes.</span>
                </div>
            </section>
        </div>
        <div id="admin-brands-pane" class="admin-tab-content hidden" data-admin-only="true">
            <section class="admin-brands">
                <div class="panel-header">
                    <div>
                        <h2>Manage Brands</h2>
                        <p class="panel-sub">Kelola brand dan lokasi-lokasinya.</p>
                    </div>
                </div>
                <div id="brands-message" class="admin-message" role="status" aria-live="polite"></div>

                <!-- Sub-tab toggles -->
                <div class="brands-subtabs">
                    <button type="button" class="brands-subtab brands-subtab--active" data-brands-subtab="search">Search Places</button>
                    <button type="button" class="brands-subtab" data-brands-subtab="details">Brand Details</button>
                </div>

                <!-- Sub-tab 1: Search & Add -->
                <div id="brands-search-section" class="brands-section">
                    <div class="admin-grid brands-grid">
                        <aside class="brands-search-panel">
                            <div class="panel-header">
                                <div>
                                    <h2>Search Places</h2>
                                    <p class="panel-sub">Cari lokasi brand. Tambahkan "di Kota/Provinsi" untuk batasi area.</p>
                                </div>
                            </div>
                            <div class="mass-search-row">
                                <input type="search" id="brands-search-input" placeholder='KFC di Jakarta' aria-label="Search places for brand">
                                <button type="button" class="search-btn" id="brands-search-btn">Search</button>
                            </div>
                            <div class="mass-search-meta">
                                <div class="mass-counts">
                                    <span id="brands-results-count">0 results</span>
                                    <span id="brands-selected-count">0 selected</span>
                                </div>
                                <div class="mass-actions">
                                    <button type="button" class="ghost-btn chip-btn" id="brands-select-all-btn">Select all</button>
                                    <button type="button" class="ghost-btn chip-btn" id="brands-clear-btn">Clear selection</button>
                                </div>
                            </div>
                            <div id="brands-results-map" class="mini-map mass-map" aria-label="Map for brand search results"></div>
                            <ul id="brands-search-results" class="mass-results" aria-label="Brand search results"></ul>
                        </aside>
                        <section class="brands-form-panel">
                            <div class="panel-header">
                                <div>
                                    <h2>Brand Assignment</h2>
                                    <p class="panel-sub">Tetapkan nama brand untuk lokasi terpilih.</p>
                                </div>
                            </div>
                            <div class="form-row">
                                <label for="brands-name-input">Brand Name</label>
                                <div class="brands-name-autocomplete">
                                    <input type="text" id="brands-name-input" placeholder="Search or add new brand..." autocomplete="off" required>
                                    <ul id="brands-name-suggestions" class="brands-name-suggestions hidden"></ul>
                                </div>
                            </div>
                            <div class="brands-selected-list-header">
                                <span class="brands-selected-label">Selected Locations</span>
                                <span id="brands-selected-summary" class="brands-selected-summary">0 of 0 selected</span>
                            </div>
                            <ul id="brands-selected-list" class="brands-selected-list" aria-label="Selected locations for brand"></ul>
                            <div class="form-actions">
                                <button type="button" class="primary-btn" id="brands-add-btn">Add to Brand</button>
                            </div>
                            <div class="brands-add-status" id="brands-add-status"></div>
                        </section>
                    </div>
                </div>

                <!-- Sub-tab 2: Brand Details -->
                <div id="brands-details-section" class="brands-section hidden">
                    <div class="brands-details-header">
                        <button type="button" class="ghost-btn chip-btn" id="brands-refresh-btn">Refresh</button>
                    </div>
                    <div id="brands-list" class="brands-accordion"></div>
                    <div id="brands-empty" class="pin-list-empty hidden">No brands saved yet.</div>
                </div>
            </section>
        </div>

        <!-- Manage Areas Tab -->
        <div id="admin-areas-pane" class="admin-tab-content hidden" data-admin-only="true">
            <section class="admin-areas-manager">
                <div class="panel-header">
                    <div>
                        <h2>Manage Areas</h2>
                        <p class="panel-sub">Kelola direktori provinsi dan kota Indonesia (Bahasa &amp; English).</p>
                    </div>
                    <div class="panel-actions">
                        <button type="button" id="areas-seed-btn" class="ghost-btn chip-btn">Seed Data</button>
                        <button type="button" id="areas-refresh-btn" class="ghost-btn chip-btn">Refresh</button>
                    </div>
                </div>
                <div id="areas-message" class="admin-message" role="status" aria-live="polite"></div>

                <div class="areas-add-form">
                    <h3>Add Province</h3>
                    <div class="areas-form-row">
                        <input type="text" id="area-new-nameId" placeholder="Nama Indonesia (e.g. Jawa Barat)">
                        <input type="text" id="area-new-nameEn" placeholder="English Name (e.g. West Java)">
                        <input type="text" id="area-new-aliases" placeholder="Aliases, comma separated">
                        <button type="button" class="chip-btn" id="area-add-province-btn">Add</button>
                    </div>
                </div>

                <div class="areas-filter-row">
                    <input type="search" id="areas-search-input" placeholder="Cari provinsi atau kota...">
                </div>

                <div id="areas-list" class="areas-accordion"></div>
                <div id="areas-empty" class="pin-list-empty hidden">No areas yet. Click "Seed Data" to populate.</div>
            </section>
        </div>

    </main>
    <script src="resident-session.js"></script>
    <script src="admin.js"></script>
</body>
</html>
